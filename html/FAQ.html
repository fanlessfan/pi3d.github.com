

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Frequently Asked Questions &mdash; pi3d 0.8 documentation</title>
    
    <link rel="stylesheet" href="_static/default.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '',
        VERSION:     '0.8',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="top" title="pi3d 0.8 documentation" href="index.html" />
    <link rel="prev" title="util Package" href="pi3d.util.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="pi3d.util.html" title="util Package"
             accesskey="P">previous</a> |</li>
        <li><a href="index.html">pi3d 0.8 documentation</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="frequently-asked-questions">
<h1>Frequently Asked Questions<a class="headerlink" href="#frequently-asked-questions" title="Permalink to this headline">¶</a></h1>
<ol class="arabic">
<li><p class="first">My RPi Crashes or reboots when I try and run a demo:</p>
<blockquote>
<div><p>Anything using a loadable texture (i.e. nearly all the demos) requires
the Python Imaging module, some demos need tk, see the <a class="reference external" href="http://pi3d.github.com/html/index.html">ReadMe</a> on installing
these.</p>
</div></blockquote>
</li>
<li><p class="first">I see nothing but a white screen:</p>
<blockquote>
<div><p>Possibly something has gone wrong with an opengles function, sometimes
there might be an error message in the terminal such as failed to create
display. This could be caused by running out of gpu memory (see <a class="reference external" href="http://pi3d.github.com/html/index.html">ReadMe</a>
for how to set up memory split) occasionally multi-thread applications
an cause this problem if an opengles function call is made not from the
main thread.</p>
</div></blockquote>
</li>
<li><p class="first">I see nothing but a black screen:</p>
<blockquote>
<div><p>Possibly something has gone wrong in a shader. There may be a line
nunber reference output by the shader compiler in the terminal window.
It is great fun experimenting with shaders but they are <em>?£#%</em> taciturn
beasts to debug! The problem could be caused by sending some bad
render setting to a shader.</p>
</div></blockquote>
</li>
<li><p class="first">I see nothing but the background (you will need to set background to
non-transparent and a color not equal to black or white to determine
if this is happening):</p>
<blockquote>
<div><p>Either the shape is behind the camera, too far away, is outside the field
of view, is too small, too large or the polygons are facing away from the
camera. Often this is because you are actually <strong>inside</strong> the object. Try
using the Camera.point_at([x,y,z]) function (see demos/ClashWalk.py for use)
or move and rotate the object and camera. Sprite and ImageSprite shapes
are one sided so cannot be seen from behind, try using a Plane instead</p>
</div></blockquote>
</li>
<li><p class="first">I can just see black silhouettes against the background:</p>
<blockquote>
<div><p>You may be trying to use a shader that requires light but there isn&#8217;t
any, or it&#8217;s turned down too low. Try switching to a &#8216;flat&#8217; shader
to check. Alternatively, if it&#8217;s a shape you have generated such as
a Lathe or a Model, the normal vectors might be pointing in the wrong
direction. Try re-generating the shape, the path you use for the Lathe
needs to start at the top of the object and there are functions in
most 3D modeling applications to recalculate normals, or force them
to point outwards.</p>
</div></blockquote>
</li>
<li><p class="first">The demo loads but the mouse doesn&#8217;t move the camera as it&#8217;s supposed to:</p>
<blockquote>
<div><p>If this only happens on demos using the <tt class="docutils literal"><span class="pre">event</span></tt> library (such as Silo.py)
then it could be the hardware configuration is pretending to be something
it isn&#8217;t. It&#8217;s not uncommon for keyboards to say they are mice or joysticks.
If you have a mouse combined with a keyboard (to save on USB slots) then
you might need to use <tt class="docutils literal"><span class="pre">get_mouse_movements(1)</span></tt>. If you have problems
with a device or inputs using the event system it&#8217;s a good idea to run
<tt class="docutils literal"><span class="pre">python</span> <span class="pre">FindDevices.py</span></tt> from <tt class="docutils literal"><span class="pre">pi3d/event/</span></tt> this will give you lots
of additional information.
TODO - other specific fixes</p>
</div></blockquote>
</li>
<li><p class="first">It appears from the demos that there are some arguments that are optional,
for example, can a Shape be drawn without specifying a shader and a texture?</p>
<blockquote>
<div><p>There are (almost too) many ways to set Shapes up to draw. The draw
method needs to have a <strong>Shader</strong>, a <strong>Light</strong> and a <strong>Camera</strong> specified
but if you neglect to create a Light and Camera when you first draw
a Shape it will generate &#8216;default instances&#8217; which most of the time
are just what you want NB They can be accessed to change setting such
as color or direction for a Light or field of view for a Camera by
using the syntax: <tt class="docutils literal"><span class="pre">Camera.instance()</span></tt>. You do, however need to explicitly
create the Shader so it does the kind of rendering you want, but you
can feed that in by various means, many of which also cater for specifying
the Texture(s) to use as well:</p>
<blockquote>
<div><p>Set them directly in the Buffer array - the other methods are
really just wrappers for this i.e.</p>
<blockquote>
<div><p>myshape.buf[0].shader = myshader
myshape.buf[0].textures = [mytexture]</p>
</div></blockquote>
<p>Include them at draw time:</p>
<blockquote>
<div><p>myshape.draw(myshader, [mytexture])</p>
</div></blockquote>
<p>Set them beforehand (probably the most usual way:</p>
<blockquote>
<div><p>myshape.set_draw_details(myshader, [mytexture])</p>
</div></blockquote>
<p>For Model objects the ambient texture or material shade will normally
be defined in the 3D object file (egg or obj/mtl) In these cases
you could use</p>
<blockquote>
<div><p>myshape.set_shader(myshader)
...
myshape.set_normal_shine(normtex, ntiles..) # leaves the first texture if there
...
myshape.set_material(mtrl)</p>
</div></blockquote>
</div></blockquote>
</div></blockquote>
</li>
<li><p class="first">How do I use a joystick, gamepad, xbox controller etc with a pi3d
application:</p>
<blockquote>
<div><p>Often these will just work with the event module when plugged into the USB,
sometimes you may need to use a different InputEvents method, for instance
with an xbox 360 you get the left joystick from <tt class="docutils literal"><span class="pre">get_joystickB3d()</span></tt>
Also you would need to install the driver and start it running first:</p>
<div class="highlight-python"><pre>sudo apt-get install xboxdrv
sudo xboxdrv -s -i 0</pre>
</div>
</div></blockquote>
</li>
<li><p class="first">How do I make my own 3D model to load into pi3d:</p>
<blockquote>
<div><p>You will need to &#8216;make&#8217; one on a bigger computer using 3D software such
as <tt class="docutils literal"><span class="pre">blender</span></tt>. This falls outside the scope of this FAQ but your best
option is to export the model as an obj file. In Bl2.6 options I specify:</p>
<div class="highlight-python"><pre>Apply Modifiers (default)
Include Edges (default)
Include Normals (have to tick)
Include UVs (default but see below)
Write Materials (default)
Object as OBJ Objects (default)

Forward -Z Forward (default)
Up Y Up (default)
these last two will mean that..
Blender.x=&gt;pi3d.x, Blender.y=&gt;pi3d.z, Blender.z=&gt;pi3d.y with no reflection
of whatever you design</pre>
</div>
<p>If you want your 3D model to be textured (have a picture wrapped around it)
you will need to define uv mapping (after you export you may need to
edit the <tt class="docutils literal"><span class="pre">mtl</span></tt> file so the relative path to the image is correct for
their locations on the pi. In programs such as blender it is also possible to
use a more detailed (high polygon) model to create a &#8216;normal map&#8217; image
that can be used to give surface detail to the model in pi3d. Quite
technical but lots of instructional videos on youtube!</p>
</div></blockquote>
</li>
<li><p class="first">I get error messages trying to install from PiStore:</p>
<blockquote>
<div><p>There was an issue with the early versions of PiStore which should
be fixed if you update it. If you continue to have problems and you
are somehow able to read this FAQ somewhere else you should be able
to download a zipped file from <a class="reference external" href="http://pi3d.github.com">http://pi3d.github.com</a> There is also
documentation and installation instructions on that webiste.</p>
</div></blockquote>
</li>
<li><p class="first">Can I use pi3d for 2D images:</p>
<blockquote>
<div><p>There are various ways of doing this. The easiest way is to use the
image to texture a simple rectangle. The simplest shape to do this
is the Sprite which is also utilised by the ImageSprite shape to
allow the texture to be specified as it is created. The Plane object
is similar but is two sided. The advantage and disadvantage of this
method is that images will be different when viewed from different
locations.</p>
<p>If you specify an orthogrphic camera (set the argument
is_3d=False) then there will be no perspective (the image will not
get smaller as it moves away from the camera) and each unit of the
dimensions of the object will be one pixel on the screen. With both
these methods the shape can be rotated, moved and scaled in all
dimensions.</p>
<p>You can also use the shader 2d_flat which takes pixels from an image
and maps them to the screen, see below. The advantage of this
method is that it can use the even simpler Canvas object and it always
stays in the same place relative to the camera so you only need one
camera, which can be the default one that you don&#8217;t have to bother
creating. See below.</p>
</div></blockquote>
</li>
<li><p class="first">How do I display 2D images in front of a 3D scene:</p>
<blockquote>
<div><p>Either draw them onto a Canvas object using the 2d_flat shader or
create two cameras one 3D and one 2D and assign the relevant camera
to the types of objects you want to be drawn by each method. You
can move the 3D camera around the scene but leave the 2D one stationary,
that way you won&#8217;t have to keep moving and rotating the 2D objects
to keep them in front of the camera.</p>
<p>Orthographic (2D) cameras will render objects so they are in front
of objects rendered by perspective (3D) cameras.</p>
<p>If you create a camera it will become the default instance so if you
need more than one you need to explicitly create them and it&#8217;s a good
idea to explicitly assign the one you want to each object.</p>
</div></blockquote>
</li>
<li><p class="first">How do I display an image exactly without anti-aliasing or smoothing
i.e. pixel perfect:</p>
<blockquote>
<div><p>This can be done by using the 2d_flat shader and spcifying when the
Texture is loaded that mipmap=False. Because this is a global setting
it will be overwritten by whichever Texture is the last to be loaded</p>
</div></blockquote>
</li>
<li><p class="first">When the demos start there is a message in the terminal
<tt class="docutils literal"><span class="pre">..echomesh.util.Log:</span> <span class="pre">Log</span> <span class="pre">level</span> <span class="pre">is</span> <span class="pre">INFO</span></tt> where does that come from and
what does it mean:</p>
<blockquote>
<div><p>pi3d uses three utilities developed in parallel with it for the
echomesh project (see ./echomesh/util/ directory). The Log module is
started by several of the basic classes (Buffer, EventStream, Display,
Loadable, Mouse, parse_mtl, Shader, Screenshot) This means that all
programs using the pi3d modules will create an echomesh Log as a
by-product. It can be used for debugging and recording errors.</p>
</div></blockquote>
</li>
<li><p class="first">How do I use <tt class="docutils literal"><span class="pre">echomesh.util.Log</span></tt> to gather or display useful information
in my application:</p>
<blockquote>
<div><p>You need to create an instance <tt class="docutils literal"><span class="pre">LOGGER</span> <span class="pre">=</span> <span class="pre">Log.logger(__name__)</span></tt> typically
then call methods of this such as <tt class="docutils literal"><span class="pre">LOGGER.info(&quot;...&quot;)</span></tt> or <tt class="docutils literal"><span class="pre">LOGGER.debug()</span></tt></p>
</div></blockquote>
</li>
<li><p class="first">How do I see the logged information from <tt class="docutils literal"><span class="pre">echomesh.util.Log</span></tt>:</p>
<blockquote>
<div><p>TODO I can&#8217;t find any file, but it looks like Log needs something in
echomesh.config.Config otherwise it will get an exception and LOG_FILE
will be set to a zero length string.</p>
</div></blockquote>
</li>
<li><p class="first">How do I keep two components (Shapes) &#8216;joined together&#8217; as they pitch, roll
and rotate (yaw), like the TigerTank does with its body, turret and gun:</p>
<blockquote>
<div><p>First of all it is easiest if you make the zero points of all the shapes
coincide. When you move and rotate the ojbects you must move and rotate
them all by the same amount. If one component is rotated about the y axis
by a different amount from the others (i.e. the turret and gun) then
the difference is just added to the y rotation for that component.
However if the component is rotated about the y axis and the x axis
(i.e. the gun) then you have to adjust the x axis and the z axis rotation
by an amount that depends on the degree of y axis rotation. See the
drawTiger function in demos/TigerTank.py for the kind of formula to use.</p>
</div></blockquote>
</li>
<li><p class="first">I want to give my shape(s) an angle of bank (z axis rotation) which it
maintains as it turns (y axis rotation) like an aeroplane. However the
z rotation is always relative to the absolute frame of reference so the shape
pitches backwards and forwards as it turns, how do I make the frame of
reference rotate with the shape:</p>
<blockquote>
<div><p>This is because of the order of the transformations done prior to
redrawing the scene (z then x then y). You have to work out what the pitch
and roll would have to be prior to rotating them about their own y axis!
To see what I mean watch the behaviour of the tanks in demos/TigerTank.py
You have to figure out the &#8216;slope of the ground&#8217; so that when your
aeroplane (or boat) is rotated it ends up with the correct pitch and
roll. For a shape with zero pitch you can use something like:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">absheel</span> <span class="o">=</span> <span class="n">degrees</span><span class="p">(</span><span class="n">asin</span><span class="p">(</span><span class="n">sin</span><span class="p">(</span><span class="n">radians</span><span class="p">(</span><span class="n">heel</span><span class="p">))</span> <span class="o">*</span> <span class="n">cos</span><span class="p">(</span><span class="n">radians</span><span class="p">(</span><span class="n">heading</span><span class="p">))))</span>
<span class="n">abspitch</span> <span class="o">=</span> <span class="n">degrees</span><span class="p">(</span><span class="n">asin</span><span class="p">(</span><span class="o">-</span><span class="n">sin</span><span class="p">(</span><span class="n">radians</span><span class="p">(</span><span class="n">heel</span><span class="p">))</span> <span class="o">*</span> <span class="n">sin</span><span class="p">(</span><span class="n">radians</span><span class="p">(</span><span class="n">heading</span><span class="p">))))</span>
<span class="n">hull</span><span class="o">.</span><span class="n">position</span><span class="p">(</span><span class="n">xm</span><span class="p">,</span> <span class="n">ym</span><span class="p">,</span> <span class="n">zm</span><span class="p">)</span>
<span class="n">hull</span><span class="o">.</span><span class="n">rotateToX</span><span class="p">(</span><span class="n">abspitch</span><span class="p">)</span>
<span class="n">hull</span><span class="o">.</span><span class="n">rotateToY</span><span class="p">(</span><span class="o">-</span><span class="n">heading</span><span class="p">)</span>
<span class="n">hull</span><span class="o">.</span><span class="n">rotateToZ</span><span class="p">(</span><span class="n">absheel</span><span class="p">)</span>
</pre></div>
</div>
</div></blockquote>
</li>
<li><p class="first">Is it possible to change the shape of an object once it&#8217;s been made:</p>
<blockquote>
<div><p>The most efficient way is to use the scale(sx, sy, sz) method. However
this obviously limits the shape changing that can take place. If the
shape needs to be changed more than this then it can be remade as
a new instance to replace the old one. When you do this you should
clear the previous opengles buffers using the unload_opengl() method
before destroying the old one otherwise there will be a memory leak.
The alternative way of doing it is to use the Buffer.re_init() method
which takes the same arguments as Buffer.__init__() (see documentation)
so is a little more technical to use. There is an example of this
technique demos/IceGrow.py</p>
</div></blockquote>
</li>
</ol>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h4>Previous topic</h4>
  <p class="topless"><a href="pi3d.util.html"
                        title="previous chapter">util Package</a></p>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="_sources/FAQ.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="pi3d.util.html" title="util Package"
             >previous</a> |</li>
        <li><a href="index.html">pi3d 0.8 documentation</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2013, The pi3d team.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.1.3.
    </div>
  </body>
</html>